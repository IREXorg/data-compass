{% extends 'surveys/base_response_form.html' %}

{% load i18n %}
{% load crispy_forms_tags %}
{% load widget_tweaks %}

{% block form_fields %}
  <div class="pb-4">{{ form|crispy }}</div>

  <div class="my-4">
    {% blocktrans trimmed with hierarchy=respondent_hierarchy.name topic_name=topic.name dataset_name=dataset.name %}
    Where at {{ hierarchy }} is {{ topic }} regarding {{ dataset }} is stored.
    {% endblocktrans %}

    <div class="my-3">
      {{ formset.management_form }}

      {% for form in formset.forms %}
  
        {% include 'bootstrap4/errors.html' %}

        {% for hidden_field in form.hidden_fields %}
          {{ hidden_field.errors }}
          {{ hidden_field }}
        {% endfor %}

      <div class="form-row my-3">

        <div class="col-auto">
          <div class="form-check d-inline">
            {% include 'bootstrap4/layout/field_errors_block.html' with field=form.selected %}
            {{ form.selected|add_class:"form-check-input" }}
          </div>
        </div>

        <div class="col-sm-2">
          {% include 'bootstrap4/layout/field_errors_block.html' with field=form.errors %}
          {{ form.storage|add_class:'d-none' }}
          {{ form.storage_name }}
        </div>

        <div class="col-auto">
          {% include 'bootstrap4/layout/field_errors_block.html' with field=form.access %}
          {{ form.access|add_class:'form-control' }}
        </div>
      </div>

      {% endfor %}
    </div>
  </div>
{% endblock %}
